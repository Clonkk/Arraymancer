<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Arraymancer - Arraymancer</title>

  <link href="docutils.css" rel="stylesheet" type="text/css"/>
  <link href="nav.css" rel="stylesheet" type="text/css"/>

  <link href='http://fonts.googleapis.com/css?family=Raleway:400,600,900' rel='stylesheet' type='text/css'/>
  <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>
</head>
<body>
<a href="https://github.com/mratsim/arraymancer"><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 10;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>
<header>
  <a class="pagetitle" href="index.html">Arraymancer</a>
  <span>
    <a href="#">Technical reference</a>
    <ul class="monospace">
      <span>
        <a href="#">Core tensor API</a>
        <ul class="monospace">
          <li><a href="tensor.accessors_macros_read.html">tensor.accessors_macros_read</a></li>
          <li><a href="tensor.accessors_macros_syntax.html">tensor.accessors_macros_syntax</a></li>
          <li><a href="tensor.accessors_macros_write.html">tensor.accessors_macros_write</a></li>
          <li><a href="tensor.accessors.html">tensor.accessors</a></li>
          <li><a href="tensor.aggregate.html">tensor.aggregate</a></li>
          <li><a href="tensor.comparison.html">tensor.comparison</a></li>
          <li><a href="tensor.data_structure.html">tensor.data_structure</a></li>
          <li><a href="tensor.display.html">tensor.display</a></li>
          <li><a href="tensor.exporting.html">tensor.exporting</a></li>
          <li><a href="tensor.filling_data.html">tensor.filling_data</a></li>
          <li><a href="tensor.higher_order_applymap.html">tensor.higher_order_applymap</a></li>
          <li><a href="tensor.higher_order_foldreduce.html">tensor.higher_order_foldreduce</a></li>
          <li><a href="tensor.init_cpu.html">tensor.init_cpu</a></li>
          <li><a href="tensor.init_copy_cpu.html">tensor.init_copy_cpu</a></li>
          <li><a href="tensor.lapack.html">tensor.lapack</a></li>
          <li><a href="tensor.math_functions.html">tensor.math_functions</a></li>
          <li><a href="tensor.operators_blas_l1.html">tensor.operators_blas_l1</a></li>
          <li><a href="tensor.operators_blas_l2l3.html">tensor.operators_blas_l2l3</a></li>
          <li><a href="tensor.operators_broadcasted.html">tensor.operators_broadcasted</a></li>
          <li><a href="tensor.operators_logical.html">tensor.operators_logical</a></li>
          <li><a href="tensor.optim_ops_fusion.html">tensor.optim_ops_fusion</a></li>
          <li><a href="tensor.shapeshifting.html">tensor.shapeshifting</a></li>
          <li><a href="tensor.syntactic_sugar.html">tensor.syntactic_sugar</a></li>
          <li><a href="tensor.ufunc.html">tensor.ufunc</a></li>
        </ul>
      </span>
      <span>
        <a href="#">Autograd</a>
        <ul class="monospace">
          <li><a href="ag.ag_accessors.html">Accessors</a></li>
          <li><a href="ag.ag_data_structure.html">Data structure</a></li>
          <li><a href="ag.gates_basic.html">Basic operations</a></li>
          <li><a href="ag.gates_blas.html">Linear algebra operations</a></li>
          <li><a href="ag.gates_reduce.html">Reduction operations</a></li>
        </ul>
      </span>
      <span>
        <a href="#">Neural network API</a>
        <ul class="monospace">
          <li><a href="nn_activation.relu.html">Activation: Relu (Rectified linear Unit)</a></li>
          <li><a href="nn_activation.sigmoid.html">Activation: Sigmoid</a></li>
          <li><a href="nn_layers.conv2D.html">Layers: Convolution</a></li>
          <li><a href="nn_layers.conv2D.html">Layers: Linear/Dense</a></li>
          <li><a href="nn_loss.sigmoid_cross_entropy.html">Loss: Sigmoid Cross-Entropy</a></li>
          <li><a href="nn_optimizers.optimizers.html">Optimizers</a></li>
        </ul>
      </span>
      <span>
        <a href="#">Neuralnet primitives</a>
        <ul class="monospace">
          <li><a href="nnp.nnp_activation.html">Activation</a></li>
          <li><a href="nnp.nnp_convolution.html">Convolution</a></li>
          <li><a href="nnp.nnp_linear.html">Linear / Dense layer</a></li>
          <li><a href="nnp.nnp_sigmoid_cross_entropy.html">Sigmoid Cross-Entropy loss</a></li>
          <li><a href="nnp.nnp_softmax_cross_entropy.html">Softmax Cross-Entropy loss</a></li>
        </ul>
      </span>
    </ul>
  </span>
  <span>
    <a href="#">Tutorial</a>
    <ul class="monospace">
      <li><a href="tuto.first_steps.html">First steps</a></li>
      <li><a href="tuto.slicing.html">Taking a slice of a tensor</a></li>
      <li><a href="tuto.linear_algebra.html">Matrix & vectors operations</a></li>
      <li><a href="tuto.broadcasting.html">Broadcasted operations</a></li>
      <li><a href="tuto.shapeshifting.html">Transposing, Reshaping, Permuting, Concatenating</a></li>
      <li><a href="tuto.map_reduce.html">Map & Reduce</a></li>
      <li><a href="tuto.iterators.html">Basic iterators</a></li>
    </ul>
  </span>
  <span>
    <a href="#">Spellbook (How-To&apos;s)</a>
    <ul class="monospace">
      <li><a href="howto.type_conversion.html">How to convert a Tensor type?</a></li>
      <li><a href="howto.ufunc.html">How to create a new universal function?</a></li>
      <li><a href="howto.perceptron.html">How to create a multilayer perceptron?</a></li>
    </ul>
  </span>
  <span>
    <a href="#">Under the hood</a>
    <ul class="monospace">
      <li><a href="uth.speed.html">How Arraymancer achieves its speed?</a></li>
      <li><a href="uth.copy_semantics.html">Why does `=` share data by default aka reference semantics?</a></li>
    </ul>
  </span>
</header>
<article id="documentId">
  <div class="container">
    <h1 class="title">Arraymancer</h1>
    
<h1 id="arraymancer-a-n-dimensional-tensor-ndarray-library">Arraymancer - A n-dimensional tensor (ndarray) library.</h1><p>Arraymancer is a tensor (N-dimensional array) project in Nim. The main focus is providing a fast and ergonomic CPU and GPU ndarray library on which to build a scientific computing and in particular a deep learning ecosystem.</p>
<p>The library is inspired by Numpy and PyTorch. The library provides ergonomics very similar to Numpy, Julia and Matlab but is fully parallel and significantly faster than those libraries. It is also faster than C-based Torch.</p>
<p>Note: While Nim is compiled and does not offer an interactive REPL yet (like Jupyter), it allows much faster prototyping than C++ due to extremely fast compilation times. Arraymancer compiles in about 5 seconds on my dual-core MacBook.</p>

<h2 id="why-arraymancer">Why Arraymancer</h2>
<h3 id="the-python-community-is-struggling-to-bring-numpy-up-to-speed">The Python community is struggling to bring Numpy up-to-speed</h3><ul class="simple"><li>Numba JIT compiler</li>
<li>Dask delayed parallel computation graph</li>
<li>Cython to ease numerical computations in Python</li>
<li>Due to the GIL shared-memory parallelism (OpenMP) is not possible in pure Python</li>
<li>Use “vectorized operations” (i.e. don’t use for loops in Python)</li>
</ul>
<p>Why not use in a single language with all the blocks to build the most efficient scientific computing library with Python ergonomics.</p>
<p>OpenMP batteries included.</p>

<h3 id="a-researcher-workflow-is-a-fight-against-inefficiencies">A researcher workflow is a fight against inefficiencies</h3><p>Researchers in a heavy scientific computing domain often have the following workflow: Mathematica/Matlab/Python/R (prototyping) -&gt; C/C++/Fortran (speed, memory)</p>
<p>Why not use in a language as productive as Python and as fast as C? Code once, and don’t spend months redoing the same thing at a lower level.</p>

<h3 id="tools-available-in-labs-are-not-available-in-production">Tools available in labs are not available in production:</h3><ul class="simple"><li>Managing and deploying Python (2.7, 3.5, 3.6) and packages version in a robust manner requires devops-fu (virtualenv, Docker, …)</li>
<li>Python data science ecosystem does not run on embedded devices (Nvidia Tegra/drones) or mobile phones, especially preprocessing dependencies.</li>
</ul>
<p>Nim is compiled, no need to worry about version conflicts and the whole toolchain being in need of fixing due to Python version updates. Furthermore, as long as your platform supports C, Arraymancer will run on it from Raspberry Pi to mobile phones and drones.</p>
<p>Note: Arraymancer Cuda/Cudnn backend is shaping up and convolutional neural nets are just around the corner.</p>

<h3 id="bridging-the-gap-between-deep-learning-research-and-production">Bridging the gap between deep learning research and production</h3><p>The deep learning frameworks are currently in two camps: - Research: Theano, Tensorflow, Keras, Torch, PyTorch - Production: Caffe, Darknet, (Tensorflow)</p>
<p>Furthermore, Python preprocessing steps, unless using OpenCV, often needs a custom implementation (think text/speech preprocessing on phones).</p>
<ul class="simple"><li>Tensorflow is supposed to bridge the gap between research and production but its syntax and ergonomics are a pain to work with. It’s the same issue as researchers, “Prototype in Keras, and when you need low-level –&gt; Tensorflow”.</li>
<li>Deployed models are static, there is no interface to add a new observation/training sample to any framework, the end goal being to use a model as a webservice.</li>
</ul>

<h3 id="so-why-arraymancer">So why Arraymancer ?</h3><p>All those pain points may seem like a huge undertaking however thanks to the Nim language, we can have Arraymancer: - Be as fast as C - Accelerated routines with Intel MKL/OpenBLAS or even NNPACK - Access to CUDA and CuDNN and generate custom CUDA kernels on the fly via metaprogramming.</p>
<blockquote><p><ul class="simple"><li>A Python-like syntax with custom operators <tt class="docutils literal"><span class="pre">a * b</span></tt></li>
</ul>
<blockquote><p>for tensor multiplication instead of <tt class="docutils literal"><span class="pre">a.dot(b)</span></tt> (Numpy/Tensorflow) or <tt class="docutils literal"><span class="pre">a.mm(b)</span></tt> (Torch) - Numpy-like slicing ergonomics <tt class="docutils literal"><span class="pre">t[0..4, 2..10|2]</span></tt></p></blockquote>
<ul class="simple"><li>For everything that Nim doesn’t have yet, you can use Nim bindings to</li>
</ul>
<blockquote><p>C, C++, Objective-C or Javascript to bring it to Nim. Nim also has unofficial Python-&gt;Nim and Nim-&gt;Python wrappers.</p></blockquote>
</p></blockquote>

<h2 id="future-ambitions">Future ambitions</h2><p>Because apparently to be successful you need a vision, I would like Arraymancer to be:</p>
<ul class="simple"><li>The go-to tool for Deep Learning video processing. I.e. <tt class="docutils literal"><span class="pre">vid = load_video(&quot;./cats/youtube_cat_video.mkv&quot;)</span></tt></li>
<li>Target javascript, WebAssembly, Apple Metal, ARM devices, AMD Rocm, OpenCL, you name it.</li>
<li>Target cryptominers FPGAs because they drove the price of GPUs for honest deep-learners too high.</li>
<li>The base of a Starcraft II AI bot.</li>
</ul>

<h2 id="support-types-os-hardware">Support (Types, OS, Hardware)</h2><p>Arraymancer’s tensors supports arbitrary types (floats, strings, objects …).</p>
<p>Arraymancer run anywhere you can compile C code. Linux, MacOS are supported, Windows should work too as Appveyor (Continuous Integration for Windows) never flash red. Optionally you can compile Arraymancer with Cuda support.</p>
<p>Note: Arraymancer Tensors and CudaTensors are tensors in the machine learning sense (multidimensional array) not in the mathematical sense (describe transformation laws)</p>

<h2 id="limitations">Limitations:</h2><p>EXPERIMENTAL: Arraymancer may summon Ragnarok and cause the heat death of the Universe.</p>
<ol class="simple"><li>Display of 5-dimensional or more tensors is not implemented. (To be honest Christopher Nolan had the same issue in Interstellar)</li>
</ol>

<h2 id="installation">Installation:</h2><p>Nim is available in some Linux repositories and on Homebrew for macOS.</p>
<p>I however recommend installing Nim in your user profile via ```choosenim`` &lt;<a class="reference external" href="https://github.com/dom96/choosenim&gt;`__">https://github.com/dom96/choosenim&gt;`__</a>. Once choosenim installed Nim, you can <tt class="docutils literal"><span class="pre">nimble install arraymancer</span></tt> which will pull arraymancer and all its dependencies.</p>

<h3 id="tensors-on-cpu-and-on-cuda">Tensors on CPU and on Cuda</h3><p>Tensors and CudaTensors do not have the same features implemented yet. Also Cuda Tensors can only be float32 or float64 while Cpu Tensor can be integers, string, boolean or any custom object.</p>
<p>Here is a comparative table, not that this feature set is developing very rapidly.</p>
<table border="1" class="docutils"><tr><th>Action</th><th>Tensor</th><th>CudaTensor</th></tr>
<tr><td>Accessing tensor properties</td><td>[x]</td><td>[x]</td></tr>
<tr><td>Tensor creation</td><td>[x]</td><td>by converting a cpu Tensor</td></tr>
<tr><td>Accessing or modifying a single value</td><td>[x]</td><td>[]</td></tr>
<tr><td>Iterating on a Tensor</td><td>[x]</td><td>[]</td></tr>
<tr><td>Slicing a Tensor</td><td>[x]</td><td>[x]</td></tr>
<tr><td>Slice mutation <tt class="docutils literal"><span class="pre">a[1,_] = 10</span></tt></td><td>[x]</td><td>[]</td></tr>
<tr><td>Comparison <tt class="docutils literal"><span class="pre">==</span></tt></td><td>[x]</td><td>Coming soon</td></tr>
<tr><td>Element-wise basic operations</td><td>[x]</td><td>[x]</td></tr>
<tr><td>Universal functions</td><td>[x]</td><td>[x]</td></tr>
<tr><td>Automatically broadcasted operations</td><td>[x]</td><td>Coming soon</td></tr>
<tr><td>Matrix-Matrix and Matrix vector multiplication</td><td>[x]</td><td>[x] Note: sliced CudaTensors must explicitly be made contiguous</td></tr>
<tr><td>Displaying a tensor</td><td>[x]</td><td>[x]</td></tr>
<tr><td>Higher-order functions (map, apply, reduce, fold)</td><td>[x]</td><td>Apply, but only for internal use</td></tr>
<tr><td>Transposing</td><td>[x]</td><td>[x]</td></tr>
<tr><td>Converting to contiguous</td><td>[x]</td><td>[x]</td></tr>
<tr><td>Reshaping</td><td>[x]</td><td>[]</td></tr>
<tr><td>Explicit broadcast</td><td>[x]</td><td>Coming soon</td></tr>
<tr><td>Permuting dimensions</td><td>[x]</td><td>Coming soon</td></tr>
<tr><td>Concatenating along existing dimensions</td><td>[x]</td><td>[]</td></tr>
<tr><td>Squeezing singleton dimensions</td><td>[x]</td><td>Coming soon</td></tr>
<tr><td>Slicing + squeezing in one operation</td><td>[x]</td><td>Coming soon</td></tr>
</table>


    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small>Made with Nim. Generated: 2017-12-13 23:30:37 UTC</small>
      </div>
    </div>
  </div>
</article>
</body>
</html>
