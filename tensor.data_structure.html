<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Arraymancer - Module data_structure</title>

  <link href="docutils.css" rel="stylesheet" type="text/css"/>
  <link href="nav.css" rel="stylesheet" type="text/css"/>

  <link href='http://fonts.googleapis.com/css?family=Raleway:400,600,900' rel='stylesheet' type='text/css'/>
  <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>
</head>
<body>
<a href="https://github.com/mratsim/arraymancer"><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 10;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>
<header>
  <a class="pagetitle" href="index.html">Arraymancer</a>
  <span>
    <a href="#">Technical reference</a>
    <ul class="monospace">
      <span>
        <a href="#">Core tensor API</a>
        <ul class="monospace">
          <li><a href="tensor.accessors_macros_read.html">tensor.accessors_macros_read</a></li>
          <li><a href="tensor.accessors_macros_syntax.html">tensor.accessors_macros_syntax</a></li>
          <li><a href="tensor.accessors_macros_write.html">tensor.accessors_macros_write</a></li>
          <li><a href="tensor.accessors.html">tensor.accessors</a></li>
          <li><a href="tensor.aggregate.html">tensor.aggregate</a></li>
          <li><a href="tensor.comparison.html">tensor.comparison</a></li>
          <li><a href="tensor.data_structure.html">tensor.data_structure</a></li>
          <li><a href="tensor.display.html">tensor.display</a></li>
          <li><a href="tensor.exporting.html">tensor.exporting</a></li>
          <li><a href="tensor.filling_data.html">tensor.filling_data</a></li>
          <li><a href="tensor.higher_order_applymap.html">tensor.higher_order_applymap</a></li>
          <li><a href="tensor.higher_order_foldreduce.html">tensor.higher_order_foldreduce</a></li>
          <li><a href="tensor.init_cpu.html">tensor.init_cpu</a></li>
          <li><a href="tensor.init_copy_cpu.html">tensor.init_copy_cpu</a></li>
          <li><a href="tensor.lapack.html">tensor.lapack</a></li>
          <li><a href="tensor.math_functions.html">tensor.math_functions</a></li>
          <li><a href="tensor.operators_blas_l1.html">tensor.operators_blas_l1</a></li>
          <li><a href="tensor.operators_blas_l2l3.html">tensor.operators_blas_l2l3</a></li>
          <li><a href="tensor.operators_broadcasted.html">tensor.operators_broadcasted</a></li>
          <li><a href="tensor.operators_logical.html">tensor.operators_logical</a></li>
          <li><a href="tensor.optim_ops_fusion.html">tensor.optim_ops_fusion</a></li>
          <li><a href="tensor.shapeshifting.html">tensor.shapeshifting</a></li>
          <li><a href="tensor.syntactic_sugar.html">tensor.syntactic_sugar</a></li>
          <li><a href="tensor.ufunc.html">tensor.ufunc</a></li>
        </ul>
      </span>
      <span>
        <a href="#">Autograd</a>
        <ul class="monospace">
          <li><a href="ag.ag_accessors.html">Accessors</a></li>
          <li><a href="ag.ag_data_structure.html">Data structure</a></li>
          <li><a href="ag.gates_basic.html">Basic operations</a></li>
          <li><a href="ag.gates_blas.html">Linear algebra operations</a></li>
          <li><a href="ag.gates_reduce.html">Reduction operations</a></li>
        </ul>
      </span>
      <span>
        <a href="#">Neural network API</a>
        <ul class="monospace">
          <li><a href="nn_activation.relu.html">Activation: Relu (Rectified linear Unit)</a></li>
          <li><a href="nn_activation.sigmoid.html">Activation: Sigmoid</a></li>
          <li><a href="nn_layers.conv2D.html">Layers: Convolution</a></li>
          <li><a href="nn_layers.conv2D.html">Layers: Linear/Dense</a></li>
          <li><a href="nn_loss.sigmoid_cross_entropy.html">Loss: Sigmoid Cross-Entropy</a></li>
          <li><a href="nn_optimizers.optimizers.html">Optimizers</a></li>
        </ul>
      </span>
      <span>
        <a href="#">Neuralnet primitives</a>
        <ul class="monospace">
          <li><a href="nnp.nnp_activation.html">Activation</a></li>
          <li><a href="nnp.nnp_convolution.html">Convolution</a></li>
          <li><a href="nnp.nnp_linear.html">Linear / Dense layer</a></li>
          <li><a href="nnp.nnp_sigmoid_cross_entropy.html">Sigmoid Cross-Entropy loss</a></li>
          <li><a href="nnp.nnp_softmax_cross_entropy.html">Softmax Cross-Entropy loss</a></li>
        </ul>
      </span>
    </ul>
  </span>
  <span>
    <a href="#">Tutorial</a>
    <ul class="monospace">
      <li><a href="tuto.first_steps.html">First steps</a></li>
      <li><a href="tuto.slicing.html">Taking a slice of a tensor</a></li>
      <li><a href="tuto.linear_algebra.html">Matrix & vectors operations</a></li>
      <li><a href="tuto.broadcasting.html">Broadcasted operations</a></li>
      <li><a href="tuto.shapeshifting.html">Transposing, Reshaping, Permuting, Concatenating</a></li>
      <li><a href="tuto.map_reduce.html">Map & Reduce</a></li>
      <li><a href="tuto.iterators.html">Basic iterators</a></li>
    </ul>
  </span>
  <span>
    <a href="#">Spellbook (How-To&apos;s)</a>
    <ul class="monospace">
      <li><a href="howto.type_conversion.html">How to convert a Tensor type?</a></li>
      <li><a href="howto.ufunc.html">How to create a new universal function?</a></li>
      <li><a href="howto.perceptron.html">How to create a multilayer perceptron?</a></li>
    </ul>
  </span>
  <span>
    <a href="#">Under the hood</a>
    <ul class="monospace">
      <li><a href="uth.speed.html">How Arraymancer achieves its speed?</a></li>
      <li><a href="uth.copy_semantics.html">Why does `=` share data by default aka reference semantics?</a></li>
    </ul>
  </span>
</header>
<article id="documentId">
  <div class="container">
    <h1 class="title">Module data_structure</h1>
    <div class="row">
  <div class="three columns">
  <div id="global-links">
    <ul class="simple">
    </ul>
  </div>
  <div id="searchInput">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Backend"
    title="Backend = enum
  Cpu, Cuda"><wbr />Backend<span class="attachedType" style="visibility:hidden"></span></a></li>
  <li><a class="reference" href="#CpuStorage"
    title="CpuStorage[T] = object
  Fdata*: seq[T]"><wbr />Cpu<wbr />Storage<span class="attachedType" style="visibility:hidden"></span></a></li>
  <li><a class="reference" href="#Tensor"
    title="Tensor[T] = object
  shape*: MetadataArray
  strides*: MetadataArray
  offset*: int
  storage*: CpuStorage[T]"><wbr />Tensor<span class="attachedType" style="visibility:hidden"></span></a></li>
  <li><a class="reference" href="#CudaStorage"
    title="CudaStorage[T] = object
  Flen*: int
  Fdata*: ptr UncheckedArray[T]
  Fref_tracking*: ref [ptr UncheckedArray[T]]"><wbr />Cuda<wbr />Storage<span class="attachedType" style="visibility:hidden"></span></a></li>
  <li><a class="reference" href="#CudaTensor"
    title="CudaTensor[T] = object
  shape*: MetadataArray
  strides*: MetadataArray
  offset*: int
  storage*: CudaStorage[T]"><wbr />Cuda<wbr />Tensor<span class="attachedType" style="visibility:hidden"></span></a></li>
  <li><a class="reference" href="#AnyTensor"
    title="AnyTensor[T] = Tensor[T] or CudaTensor[T]"><wbr />Any<wbr />Tensor<span class="attachedType" style="visibility:hidden"></span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#data,Tensor[T]"
    title="data[T](t: Tensor[T]): seq[T]"><wbr />data<span class="attachedType" style="visibility:hidden">Tensor</span></a></li>
  <li><a class="reference" href="#data,Tensor[T]_2"
    title="data[T](t: var Tensor[T]): var seq[T]"><wbr />data<span class="attachedType" style="visibility:hidden">Tensor</span></a></li>
  <li><a class="reference" href="#data=,Tensor[T],seq[T]"
    title="data=[T](t: var Tensor[T]; s: seq[T])"><wbr />data=<span class="attachedType" style="visibility:hidden">Tensor</span></a></li>
  <li><a class="reference" href="#size,AnyTensor"
    title="size(t: AnyTensor): int"><wbr />size<span class="attachedType" style="visibility:hidden">AnyTensor</span></a></li>
  <li><a class="reference" href="#shape_to_strides,MetadataArray,OrderType,MetadataArray"
    title="shape_to_strides(shape: MetadataArray; layout: OrderType = rowMajor;
                 result: var MetadataArray)"><wbr />shape_<wbr />to_<wbr />strides<span class="attachedType" style="visibility:hidden"></span></a></li>
  <li><a class="reference" href="#is_C_contiguous,AnyTensor"
    title="is_C_contiguous(t: AnyTensor): bool"><wbr />is_<wbr />C_<wbr />contiguous<span class="attachedType" style="visibility:hidden">AnyTensor</span></a></li>
  <li><a class="reference" href="#is_F_contiguous,AnyTensor"
    title="is_F_contiguous(t: AnyTensor): bool"><wbr />is_<wbr />F_<wbr />contiguous<span class="attachedType" style="visibility:hidden">AnyTensor</span></a></li>
  <li><a class="reference" href="#isContiguous,AnyTensor"
    title="isContiguous(t: AnyTensor): bool"><wbr />is<wbr />Contiguous<span class="attachedType" style="visibility:hidden">AnyTensor</span></a></li>
  <li><a class="reference" href="#get_data_ptr,AnyTensor[T]"
    title="get_data_ptr[T](t: AnyTensor[T]): ptr T"><wbr />get_<wbr />data_<wbr />ptr<span class="attachedType" style="visibility:hidden">AnyTensor</span></a></li>
  <li><a class="reference" href="#get_offset_ptr,AnyTensor[T]"
    title="get_offset_ptr[T](t: AnyTensor[T]): ptr T"><wbr />get_<wbr />offset_<wbr />ptr<span class="attachedType" style="visibility:hidden">AnyTensor</span></a></li>
  <li><a class="reference" href="#dataArray,Tensor[T]"
    title="dataArray[T](t: Tensor[T]): ptr UncheckedArray[T]"><wbr />data<wbr />Array<span class="attachedType" style="visibility:hidden">Tensor</span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#18" id="68">Templates</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#rank.t,AnyTensor"
    title="rank(t: AnyTensor): int"><wbr />rank<span class="attachedType" style="visibility:hidden">AnyTensor</span></a></li>

  </ul>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  <p class="module-desc"></p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="./backend/metadataArray.html">./backend/metadataArray</a>, <a class="reference external" href="nimblas.html">nimblas</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<dt id="Backend"><a name="Backend"></a><pre><span class="Identifier">Backend</span> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">Cpu</span><span class="Other">,</span> <span class="Identifier">Cuda</span></pre></dt>
<dd>
<p><tt class="docutils literal"><span class="pre">Backend</span></tt> for tensor computation and memory allocation.</p>
<p>Only deprecated procs from v0.1.3 uses this for the moment.</p>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L21"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L21" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="CpuStorage"><a name="CpuStorage"></a><pre><span class="Identifier">CpuStorage</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">Fdata</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span>
</pre></dt>
<dd>
Opaque data storage for Tensors Currently implemented as a seq with reference semantics (shallow copy on assignment). It may change in the future for a custom memory managed and 64 bit aligned solution.<dl class="docutils"><dt>Warning ⚠:</dt>
<dd>Do not use Fdata directly, direct access will be removed in 0.4.0.</dd>
</dl>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L29"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L29" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="Tensor"><a name="Tensor"></a><pre><span class="Identifier">Tensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">shape</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">MetadataArray</span>
  <span class="Identifier">strides</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">MetadataArray</span>
  <span class="Identifier">offset</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">storage</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">CpuStorage</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span>
</pre></dt>
<dd>
<dl class="docutils"><dt>Tensor data structure stored on Cpu</dt>
<dd><ul class="simple"><li><tt class="docutils literal"><span class="pre">shape</span></tt>: Dimensions of the tensor</li>
<li><tt class="docutils literal"><span class="pre">strides</span></tt>: Numbers of items to skip to get the next item along a dimension.</li>
<li><tt class="docutils literal"><span class="pre">offset</span></tt>: Offset to get the first item of the tensor. Note: offset can be negative, in particular for slices.</li>
<li><tt class="docutils literal"><span class="pre">storage</span></tt>: An opaque data storage for the tensor</li>
</ul>
</dd>
</dl>
<p>Fields are public so that external libraries can easily construct a Tensor. You can use <tt class="docutils literal"><span class="pre">.data</span></tt> to access the opaque data storage.</p>
<dl class="docutils"><dt>Warning ⚠:</dt>
<dd>Assignment ```var a = b``` does not copy the data. Data modification on one tensor will be reflected on the other. However modification on metadata (shape, strides or offset) will not affect the other tensor. Explicit copies can be made with <tt class="docutils literal"><span class="pre">clone</span></tt>: ```var a = b.clone```</dd>
</dl>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L40"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L40" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="CudaStorage"><a name="CudaStorage"></a><pre><span class="Identifier">CudaStorage</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">Flen</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">Fdata</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">UncheckedArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span>
  <span class="Identifier">Fref_tracking</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">ref</span> <span class="Other">[</span><span class="Keyword">ptr</span> <span class="Identifier">UncheckedArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">]</span>
</pre></dt>
<dd>
<p>Opaque seq-like structure for storage on the Cuda backend.</p>
<p>Nim garbage collector will automatically ask cuda to clear GPU memory if data becomes unused. </p>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L59"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L59" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="CudaTensor"><a name="CudaTensor"></a><pre><span class="Identifier">CudaTensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">shape</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">MetadataArray</span>
  <span class="Identifier">strides</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">MetadataArray</span>
  <span class="Identifier">offset</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">storage</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">CudaStorage</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span>
</pre></dt>
<dd>
<dl class="docutils"><dt>Tensor data structure stored on Nvidia GPU (Cuda)</dt>
<dd><ul class="simple"><li><tt class="docutils literal"><span class="pre">shape</span></tt>: Dimensions of the CudaTensor</li>
<li><tt class="docutils literal"><span class="pre">strides</span></tt>: Numbers of items to skip to get the next item along a dimension.</li>
<li><tt class="docutils literal"><span class="pre">offset</span></tt>: Offset to get the first item of the CudaTensor. Note: offset can be negative, in particular for slices.</li>
<li><tt class="docutils literal"><span class="pre">storage</span></tt>: An opaque data storage for the CudaTensor</li>
</ul>
</dd>
<dt>Warning ⚠:</dt>
<dd>Assignment ```var a = b``` does not copy the data. Data modification on one CudaTensor will be reflected on the other. However modification on metadata (shape, strides or offset) will not affect the other tensor. Explicit copies can be made with <tt class="docutils literal"><span class="pre">clone</span></tt>: ```var a = b.clone```</dd>
</dl>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L69"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L69" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="AnyTensor"><a name="AnyTensor"></a><pre><span class="Identifier">AnyTensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other">=</span> <span class="Identifier">Tensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Keyword">or</span> <span class="Identifier">CudaTensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span></pre></dt>
<dd>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L85"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L85" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<dt id="data"><a name="data,Tensor[T]"></a><pre><span class="Keyword">proc</span> <span class="Identifier">data</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">Tensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">inline</span><span class="Other">,</span> <span class="Identifier">noSideEffect</span><span class="Other">,</span> <span class="Identifier">noInit</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L91"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L91" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="data"><a name="data,Tensor[T]_2"></a><pre><span class="Keyword">proc</span> <span class="Identifier">data</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Tensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">inline</span><span class="Other">,</span> <span class="Identifier">noSideEffect</span><span class="Other">,</span> <span class="Identifier">noInit</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L96"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L96" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="data="><a name="data=,Tensor[T],seq[T]"></a><pre><span class="Keyword">proc</span> <span class="Identifier">data=</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Tensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">inline</span><span class="Other">,</span> <span class="Identifier">noSideEffect</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L101"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L101" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="size"><a name="size,AnyTensor"></a><pre><span class="Keyword">proc</span> <span class="Identifier">size</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">AnyTensor</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">noSideEffect</span><span class="Other">,</span> <span class="Identifier">inline</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
<dl class="docutils"><dt>Input:</dt>
<dd><ul class="simple"><li>A tensor</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><ul class="simple"><li>The total number of elements it contains</li>
</ul>
</dd>
</dl>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L122"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L122" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="shape_to_strides"><a name="shape_to_strides,MetadataArray,OrderType,MetadataArray"></a><pre><span class="Keyword">proc</span> <span class="Identifier">shape_to_strides</span><span class="Other">(</span><span class="Identifier">shape</span><span class="Other">:</span> <span class="Identifier">MetadataArray</span><span class="Other">;</span> <span class="Identifier">layout</span><span class="Other">:</span> <span class="Identifier">OrderType</span> <span class="Other">=</span> <span class="Identifier">rowMajor</span><span class="Other">;</span>
                     <span class="Identifier">result</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">MetadataArray</span><span class="Other">)</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">noSideEffect</span><span class="Other">,</span> <span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
<dl class="docutils"><dt>Input:</dt>
<dd><ul class="simple"><li>A shape (MetadataArray), for example [3,5] for a 3x5 matrix</li>
<li>Optionally rowMajor (C layout - default) or colMajor (Fortran)</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><ul class="simple"><li>The strides in C or Fortran order corresponding to this shape and layout</li>
</ul>
</dd>
</dl>
<p> Arraymancer defaults to rowMajor. Temporarily, CudaTensors are colMajor by default.</p>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L129"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L129" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="is_C_contiguous"><a name="is_C_contiguous,AnyTensor"></a><pre><span class="Keyword">proc</span> <span class="Identifier">is_C_contiguous</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">AnyTensor</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">noSideEffect</span><span class="Other">,</span> <span class="Identifier">inline</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
Check if the tensor follows C convention / is row major
&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L152"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L152" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="is_F_contiguous"><a name="is_F_contiguous,AnyTensor"></a><pre><span class="Keyword">proc</span> <span class="Identifier">is_F_contiguous</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">AnyTensor</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">noSideEffect</span><span class="Other">,</span> <span class="Identifier">inline</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
Check if the tensor follows Fortran convention / is column major
&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L163"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L163" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="isContiguous"><a name="isContiguous,AnyTensor"></a><pre><span class="Keyword">proc</span> <span class="Identifier">isContiguous</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">AnyTensor</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">noSideEffect</span><span class="Other">,</span> <span class="Identifier">inline</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
Check if the tensor is contiguous
&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L174"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L174" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="get_data_ptr"><a name="get_data_ptr,AnyTensor[T]"></a><pre><span class="Keyword">proc</span> <span class="Identifier">get_data_ptr</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">AnyTensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">T</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">noSideEffect</span><span class="Other">,</span> <span class="Identifier">inline</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
<dl class="docutils"><dt>Input:</dt>
<dd><ul class="simple"><li>A tensor</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><ul class="simple"><li>A pointer to the real start of its data (no offset)</li>
</ul>
</dd>
</dl>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L183"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L183" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="get_offset_ptr"><a name="get_offset_ptr,AnyTensor[T]"></a><pre><span class="Keyword">proc</span> <span class="Identifier">get_offset_ptr</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">AnyTensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">T</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">noSideEffect</span><span class="Other">,</span> <span class="Identifier">inline</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
<dl class="docutils"><dt>Input:</dt>
<dd><ul class="simple"><li>A tensor</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><ul class="simple"><li>A pointer to the offset start of its data</li>
</ul>
</dd>
</dl>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L190"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L190" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="dataArray"><a name="dataArray,Tensor[T]"></a><pre><span class="Keyword">proc</span> <span class="Identifier">dataArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">Tensor</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Keyword">ptr</span> <span class="Identifier">UncheckedArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">noSideEffect</span><span class="Other">,</span> <span class="Identifier">inline</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
<dl class="docutils"><dt>Input:</dt>
<dd><ul class="simple"><li>A tensor</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><ul class="simple"><li>A pointer to the offset start of the data. Return value supports array indexing.</li>
</ul>
</dd>
</dl>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L197"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L197" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>
<div class="section" id="18">
<h1><a class="toc-backref" href="#18">Templates</a></h1>
<dl class="item">
<dt id="rank"><a name="rank.t,AnyTensor"></a><pre><span class="Keyword">template</span> <span class="Identifier">rank</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">AnyTensor</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
<dd>
<dl class="docutils"><dt>Input:</dt>
<dd><ul class="simple"><li>A tensor</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><ul class="simple"><li>Its rank</li>
</ul>
</dd>
<dt></dt>
<dd><ul class="simple"><li>0 for scalar (unfortunately cannot be stored)</li>
<li>1 for vector</li>
<li>2 for matrices</li>
<li>N for N-dimension array</li>
</ul>
</dd>
</dl>

&nbsp;&nbsp;<a
href="https://github.com/mratsim/arraymancer/tree/master/src/tensor/data_structure.nim#L110"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/mratsim/arraymancer/edit/master/src/tensor/data_structure.nim#L110" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small>Made with Nim. Generated: 2017-12-13 22:30:44 UTC</small>
      </div>
    </div>
  </div>
</article>
</body>
</html>
